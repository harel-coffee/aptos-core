//**** Cross-compiled for `masm` syntax from `tests/misc/bug_17283_a.move`

//# publish
// Bytecode version v8
module 0xc0ffee::m
struct S has copy + drop
  x: u64

// Function definition at index 0
fun foo(l0: &mut S): u64
    local l1: S
    local l2: &mut S
    ld_u64 0
    pack S
    st_loc l1
    mut_borrow_loc l1
    st_loc l2
    // @5
    ld_u64 12
    move_loc l2
    mut_borrow_field S, x
    write_ref
    copy_loc l0
    // @10
    mut_borrow_field S, x
    call mod
    move_loc l0
    borrow_field S, x
    read_ref
    // @15
    ret

// Function definition at index 1
fun mod(l0: &mut u64)
    ld_u64 42
    move_loc l0
    write_ref
    ret

// Function definition at index 2
#[persistent] public fun test(): u64
    local l0: S
    ld_u64 0
    pack S
    st_loc l0
    mut_borrow_loc l0
    call foo
    // @5
    ret



//# run 0xc0ffee::m::test