//**** Cross-compiled for `masm` syntax from `tests/no-v1-comparison/closures/field_access_closure.move`

//# publish
// Bytecode version v8
module 0xc0ffee::m
struct Func1 has copy + drop
  bar: ||u64 has copy + drop

enum Func2 has copy + drop
  V1
    bar: |u64|u64 has copy + drop
  V2
    bar: |u64|u64 has copy + drop
    x: u64

struct Func3 has copy + drop
  _0: ||u64 has copy + drop

// Function definition at index 0
fun test1(): u64
    local l0: Func1
    pack_closure __lambda__1__test1, 0
    pack Func1
    st_loc l0
    borrow_loc l0
    borrow_field Func1, bar
    // @5
    read_ref
    call_closure <||u64 has copy + drop>
    ret

// Function definition at index 1
fun test2(): u64
    local l0: Func2
    local l1: Func2
    pack_closure __lambda__1__test2, 0
    pack_variant Func2, V1
    st_loc l0
    pack_closure __lambda__2__test2, 0
    ld_u64 44
    // @5
    pack_variant Func2, V2
    st_loc l1
    ld_u64 42
    borrow_loc l0
    borrow_variant_field Func2, V1::bar, V2::bar
    // @10
    read_ref
    call_closure <|u64|u64 has copy + drop>
    borrow_loc l1
    borrow_variant_field Func2, V2::x
    read_ref
    // @15
    borrow_loc l1
    borrow_variant_field Func2, V1::bar, V2::bar
    read_ref
    call_closure <|u64|u64 has copy + drop>
    add
    // @20
    ret

// Function definition at index 2
fun test3(): u64
    local l0: Func3
    pack_closure __lambda__1__test3, 0
    pack Func3
    st_loc l0
    borrow_loc l0
    borrow_field Func3, _0
    // @5
    read_ref
    call_closure <||u64 has copy + drop>
    ret

// Function definition at index 3
fun __lambda__1__test1(): u64
    ld_u64 42
    ret

// Function definition at index 4
fun __lambda__1__test2(l0: u64): u64
    move_loc l0
    ret

// Function definition at index 5
fun __lambda__2__test2(l0: u64): u64
    move_loc l0
    ld_u64 1
    add
    ret

// Function definition at index 6
fun __lambda__1__test3(): u64
    ld_u64 42
    ret



//# run 0xc0ffee::m::test1

//# run 0xc0ffee::m::test2

//# run 0xc0ffee::m::test3