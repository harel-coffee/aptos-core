//**** Cross-compiled for `masm` syntax from `tests/no-v1-comparison/dotdot/nested.move`

//# publish
// Bytecode version v8
module 0x42::test
enum E has drop
  V1
    _0: u8
    _1: S1<u8, bool>
  V2
    x: u8
    y: S0<u8, bool>

struct S0<T0, T1> has drop
  _0: T0
  _1: T1

struct S1<T0, T1> has drop
  x: T0
  y: T1

// Function definition at index 0
fun extract_first_u8(l0: &E): u8
    local l1: u8
    copy_loc l0
    test_variant E, V1
    br_false l0
    move_loc l0
    borrow_variant_field E, V1::_0
    // @5
    read_ref
    st_loc l1
l2: move_loc l1
    ret
l0: copy_loc l0
    // @10
    test_variant E, V2
    br_false l1
    move_loc l0
    borrow_variant_field E, V2::x
    read_ref
    // @15
    st_loc l1
    branch l2
l1: move_loc l0
    pop
    ld_u64 14566554180833181697
    // @20
    abort

// Function definition at index 1
fun extract_last_u8(l0: &E): u8
    local l1: u8
    copy_loc l0
    test_variant E, V1
    br_false l0
    move_loc l0
    borrow_variant_field E, V1::_1
    // @5
    borrow_field S1<u8, bool>, x
    read_ref
    st_loc l1
l2: move_loc l1
    ret
    // @10
l0: copy_loc l0
    test_variant E, V2
    br_false l1
    move_loc l0
    borrow_variant_field E, V2::y
    // @15
    borrow_field S0<u8, bool>, _0
    read_ref
    st_loc l1
    branch l2
l1: move_loc l0
    // @20
    pop
    ld_u64 14566554180833181697
    abort

// Function definition at index 2
fun test1(): u8
    local l0: E
    ld_u8 42
    ld_u8 43
    ld_true
    pack S1<u8, bool>
    pack_variant E, V1
    // @5
    st_loc l0
    borrow_loc l0
    call extract_first_u8
    ret

// Function definition at index 3
fun test2(): u8
    local l0: E
    ld_u8 42
    ld_u8 43
    ld_true
    pack S0<u8, bool>
    pack_variant E, V2
    // @5
    st_loc l0
    borrow_loc l0
    call extract_first_u8
    ret

// Function definition at index 4
fun test3(): u8
    local l0: E
    ld_u8 42
    ld_u8 43
    ld_true
    pack S1<u8, bool>
    pack_variant E, V1
    // @5
    st_loc l0
    borrow_loc l0
    call extract_last_u8
    ret

// Function definition at index 5
fun test4(): u8
    local l0: E
    ld_u8 42
    ld_u8 43
    ld_true
    pack S0<u8, bool>
    pack_variant E, V2
    // @5
    st_loc l0
    borrow_loc l0
    call extract_last_u8
    ret



//# run --verbose -- 0x42::test::test1

//# run --verbose -- 0x42::test::test2

//# run --verbose -- 0x42::test::test3

//# run --verbose -- 0x42::test::test4